#### 不能改变原有变量类型

- 不可以改变原有变量类型，Solidity是强类型语言。
- 下面例子就是不允许的

``` solidity
contract MyContract {
    uint256 private x;
    string private y;
}

contract MyContract {
    string private x;
    string private y;
}
```

#### 不能变更原有变量顺序

- 原有变量定义好后，所在存储槽的位置已经固定了（状态变量是存储在区块链上的，所以存储空间需要预先分配），  
  当然该存储槽所存储的变量类型也固定下来了，不可以变更。

    1. 可以在不改变量类型的情况下，改变名称，也就是重命名，值还是原有变量的值。
    2. 不可以在变量之前插入一个变量，这样大概率会让后面变量错位（导致变量名称、值、类型对不上），所以可  
       以在原有变量后面增加新的变量而不是插入。
- 下面例子是不允许的

``` solidity
// 改变原有变量位置
contract MyContract {
    uint256 private x;
    string private y;
}

contract MyContract {
    string private y;
    uint256 private x;
}
```

#### 删除变量

- 如果从合约末尾删除变量，请注意删除变量对应的存储不会被清除。添加新变量的后续更新将导致新变量从已删除的变量中读取剩余值。所以在升级的时候，可以不用删除原变量或者将原变量用重命名的方式废弃。

#### 小结

- 合约一旦部署，变量的类型、值所在存储槽的位置就固定下来了。后续升级时候。原有变量可以重命名（原有值还在，类型也不能变）。不建议删除（删除后，愿变量对应的存储槽还在，后面新增的变量会对应到已删变量的存储槽，所以，变量尽量新增不要删除）。
- mapping的存储位置是storage，是引用类型, 此时mapping变量类似一个指针，只占用一个存储槽。所以后续增加引用类型时候，就把该类型看作只占用一个存储槽的变量就可以了（__gap[]相应的减少一个存储槽位置就行）
